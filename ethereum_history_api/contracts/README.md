## Noir ethereum history api Solidity smart contracts

This repo contains the following smart contracts:

- [`EthereumHistoryVerifier`](src/EthereumHistoryVerifier.sol) - which ensures block belongs to the chain
- Autogenerated Solidity verifiers:
  - [`GetHeaderUltraPlonkVerifier`](src/generated-verifier/GetHeaderUltraPLONKVerifier.sol) auto-generated from [get_header](../circuits/get_header)
  - [`GetAccountUltraPlonkVerifier`](src/generated-verifier/GetAccountUltraPLONKVerifier.sol) auto-generated from [get_account](../circuits/get_account)
  - [`GetStorageUltraPlonkVerifier`](src/generated-verifier/GetStorageUltraPLONKVerifier.sol) auto-generated from [get_storage](../circuits/get_storage)
  - [`GetReceiptUltraPlonkVerifier`](src/generated-verifier/GetReceiptUltraPLONKVerifier.sol) auto-generated from [get_receipt](../circuits/get_receipt)
  - [`GetTransactionUltraPlonkVerifier`](src/generated-verifier/GetTransactionUltraPLONKVerifier.sol) auto-generated from [get_transaction](../circuits/get_transaction)

Because forge can not compile files outside of it's `src` directory - we symlink autogenerated contracts.

Run `ls -la src/generated-verifier` to see the symlinks.

Use `ln -s source_file target_file` command to create a new one

## Usage

### Build

```shell
$ forge build
```

This will generate compilation artifacts which are later consumed in [E2E tests](../tests/)

```sh
out
├── EthereumHistoryVerifier.sol
│   └── EthereumHistoryVerifier.json
├── GetAccountUltraPLONKVerifier.sol
│   └── UltraVerifier.json
├── GetHeaderUltraPLONKVerifier.sol
│   └── UltraVerifier.json
├── GetStorageUltraPLONKVerifier.sol
│   └── UltraVerifier.json
└── GetTransactionUltraPLONKVerifier.sol
    └── UltraVerifier.json
```

### Test

```shell
$ forge test
```
